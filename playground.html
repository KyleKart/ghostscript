<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>GhostScript Playground</title>
  <script src="ghostscript.js"></script>
  <style>
    body { font-family: sans-serif; margin: 20px; background: #f0f0f0; color: #333; }
    textarea { width: 100%; height: 200px; font-family: monospace; font-size: 14px; margin-bottom: 10px; padding: 10px; box-sizing: border-box; resize: vertical; }
    button { padding: 10px 15px; font-size: 16px; cursor: pointer; margin-right: 10px; }
    pre { background: #222; color: #eee; padding: 15px; overflow-x: auto; white-space: pre-wrap; border-radius: 4px; margin-top: 20px; min-height: 100px; }
    label { font-weight: bold; display: block; margin-top: 20px; }
    #consoleOutput {
      background: #000;
      color: #0f0;
      font-family: monospace;
      padding: 10px;
      border-radius: 4px;
      height: 150px;
      overflow-y: auto;
      white-space: pre-wrap;
    }
    ghost { display: none !important; }
  </style>
</head>
<body>

<h1>GhostScript Playground</h1>

<textarea id="ghostSource" spellcheck="false">
// Write your GhostScript code here, e.g.:
out("Hello from GhostScript!");
var x = 5;
if (x > 2)
  out("x is greater than 2");
</textarea>

<button id="runBtn">Run</button>

<pre id="consoleOutput">// Output appears here</pre>

<ghost id="runner"></ghost>

<script>
  const consoleOutput = document.getElementById('consoleOutput');
  const originalLog = console.log;
  const originalErr = console.error;

  console.log = (...args) => {
    consoleOutput.textContent += args.join(' ') + '\n';
    originalLog(...args);
  };

  console.error = (...args) => {
    consoleOutput.textContent += '[ERR] ' + args.join(' ') + '\n';
    originalErr(...args);
  };

  document.getElementById('runBtn').addEventListener('click', () => {
    const code = document.getElementById('ghostSource').value;
    document.getElementById('runner').textContent = code;
    consoleOutput.textContent = '';
    if (window.runGhostTags) runGhostTags();
  });
</script>

</body>
</html>
