<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>GhostScript Playground</title>
  <script src="ghostscript.js"></script>
  <style>
    body {
      font-family: monospace;
      padding: 1rem;
      background: #111;
      color: #eee;
    }
    textarea {
      width: 100%;
      height: 150px;
      background: #222;
      color: #0f0;
      padding: 0.5rem;
      border: none;
      resize: vertical;
    }
    button {
      margin-top: 10px;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      cursor: pointer;
    }
    pre {
      margin-top: 1rem;
      background: #000;
      color: #0f0;
      padding: 1rem;
      overflow-y: auto;
      white-space: pre-wrap;
    }
    ghost {
      display: none !important;
    }
  </style>
</head>
<body>

<textarea id="ghostSource" spellcheck="false">
// Write your GhostScript code here, e.g.:
out("Hello from GhostScript!");
var x = 5;
if (x > 2)
  out("x is greater than 2");
</textarea>

<button id="runBtn">Run</button>

<pre id="consoleOutput">// Output appears here</pre>

<ghost id="runner"></ghost>

<script>
  const consoleOutput = document.getElementById('consoleOutput');
  const originalLog = console.log;
  const originalErr = console.error;

  console.log = (...args) => {
    consoleOutput.textContent += args.join(' ') + '\n';
    originalLog(...args);
  };

  console.error = (...args) => {
    consoleOutput.textContent += '[ERR] ' + args.join(' ') + '\n';
    originalErr(...args);
  };

  document.getElementById('runBtn').addEventListener('click', () => {
    const code = document.getElementById('ghostSource').value;
    document.getElementById('runner').textContent = code;
    consoleOutput.textContent = '';
    if (window.runGhostTags) runGhostTags();
  });
</script>

</body>
</html>
